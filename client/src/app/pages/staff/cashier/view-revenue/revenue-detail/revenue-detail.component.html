<section class="revenue-table">
  <h2>Bảng chi tiết doanh thu / order</h2>

  <div class="table-wrapper">
    <table class="orders-table" aria-describedby="orders-desc">
      <caption id="orders-desc" class="sr-only">Danh sách các đơn hàng và doanh thu</caption>
      <thead>
        <tr>
          <th>#</th>
          <th>Order ID</th>
          <th>Ngày</th>
          <th>Bàn</th>
          <th>Khách hàng</th>
          <th>Sản phẩm / Mô tả</th>
          <th>Số lượng</th>
          <th>Thành tiền</th>
          <th>Trạng thái</th>
        </tr>
      </thead>
      <tbody>
        @if (pagedRows().length === 0) {
          <tr class="placeholder">
            <td colspan="9">Không có dữ liệu</td>
          </tr>
        } @else {
          @for (order of pagedRows(); track $index; let i = $index) {
            <tr>
              <td>{{ pageIndex() * pageSize + i + 1 }}</td>
              <td>{{ order.code }}</td>
              <td>{{ order.date | date:'dd/MM/yyyy' }}</td>
              <td>{{ order.table }}</td>
              <td>{{ order.customer }}</td>
              <td>
                <ul class="items">
                  @for (item of order.items; track $index) {
                    <li>
                      {{ item.productName }} (x{{item.quantity}})
                    </li>
                  }
                </ul>
              </td>
              <td>{{ order.totalQty }}</td>
              <td>{{ order.amount | currency:'VND':'symbol':'1.0-0' }}</td>
              <td>
                <span class="status" [class.paid]="order.isPaid" [class.unpaid]="!order.isPaid">
                  {{ order.isPaid ? 'PAID' : 'UNPAID' }}
                </span>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>

  <div class="table-footer">
    <div class="pagination">
      <button class="btn page prev" (click)="prevPage()" [disabled]="pageIndex()===0">‹</button>
      <span class="page-info">{{ pageIndex()+1 }} / {{ totalPages() }}</span>
      <button class="btn page next" (click)="nextPage()" [disabled]="pageIndex()+1>=totalPages()">›</button>
    </div>
  </div>
</section>
