<div class="edit-drink-container">

  <!-- DANH SÁCH SẢN PHẨM BÊN TRÁI -->
  <div class="product-list">
    <h3>Danh sách món</h3>
    <ul>
      <li *ngFor="let product of products" (click)="selectProduct(product)">
        <img [src]="product.urlImage" alt="{{product.nameProduct}}">
        <div class="product-info">
          <strong>{{product.nameProduct}}</strong>
          <span>{{product.price | currency:'VND'}}</span>
          <small>Category: {{product.category}}</small>
        </div>
        <button class="delete-btn" (click)="deleteProduct(product._id); $event.stopPropagation();">Xóa</button>
      </li>
    </ul>
  </div>

  <!-- FORM THÊM/SỬA BÊN PHẢI -->
  <div class="edit-form">
    <h3>{{selectedProductId ? 'Chỉnh sửa món' : 'Thêm món mới'}}</h3>
    <form (ngSubmit)="selectedProductId ? updateProduct() : uploadProduct()" [formGroup]="editForm">
      <label>
        Tên món:
        <input type="text" formControlName="nameProduct" placeholder="Tên món">
      </label>

      <label>
        Giá:
        <input type="number" formControlName="price" placeholder="Giá món">
      </label>

      <label>
        Category:
        <select formControlName="category">
          <option *ngFor="let cat of categories" [value]="cat">{{cat}}</option>
        </select>
      </label>

      <label>
        Ảnh:
        <input type="file" (change)="onFileChange($event)">
      </label>

      <div class="form-actions">
        <button type="submit" [disabled]="loading">
          <span *ngIf="!loading">{{selectedProductId ? 'Cập nhật' : 'Upload'}}</span>
          <span *ngIf="loading" class="spinner"></span>
        </button>

        <button type="button" (click)="editForm.reset(); selectedFile=null; selectedProductId=null;" [disabled]="loading">
          Hủy
        </button>
      </div>
    </form>

    <div class="error-message" *ngIf="errorMessage">{{errorMessage}}</div>
  </div>

</div>
